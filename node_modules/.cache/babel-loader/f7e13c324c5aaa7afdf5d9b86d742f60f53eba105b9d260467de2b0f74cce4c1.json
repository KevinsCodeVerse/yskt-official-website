{"ast":null,"code":"import _toConsumableArray from \"/Users/fjw/Desktop/yskt/yskt-official-website/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _objectSpread from \"/Users/fjw/Desktop/yskt/yskt-official-website/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _regeneratorRuntime from \"/Users/fjw/Desktop/yskt/yskt-official-website/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/fjw/Desktop/yskt/yskt-official-website/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport { getCategoryApi } from \"@/common/api/schoollDetails\";\nimport { getUserOrderApi } from \"@/common/api/user\";\nimport singleFilter from \"@/components/singleFilter.vue\";\nimport { getDate } from \"@/utils/tools\";\nexport default {\n  components: {\n    singleFilter: singleFilter\n  },\n  data: function data() {\n    return {\n      formateDate: getDate,\n      filterData: {\n        hasFree: \"\",\n        categoryId: \"\",\n        hasLive: \"\"\n      },\n      filterList: [{\n        label: \"课程分类\",\n        key: \"hasFree\",\n        value: \"\",\n        options: [{\n          id: 0,\n          name: \"公开课\"\n        }, {\n          id: 1,\n          name: \"会员课\"\n        }]\n      }, {\n        label: \"课程类型\",\n        key: \"categoryId\",\n        value: \"\",\n        options: []\n      }, {\n        label: \"观看类型\",\n        value: \"\",\n        key: \"hasLive\",\n        options: [{\n          id: 0,\n          name: \"直播\"\n        }, {\n          id: 1,\n          name: \"录播\"\n        }]\n      }],\n      hasFreeList: [{\n        id: 0,\n        name: \"免费\"\n      }, {\n        id: 1,\n        name: \"收费\"\n      }],\n      hasLiveList: [{\n        id: 0,\n        name: \"直播\"\n      }, {\n        id: 1,\n        name: \"录播\"\n      }],\n      orderList: [],\n      pageNo: 1,\n      pageSize: 3,\n      total: 0,\n      loading: false\n    };\n  },\n  created: function created() {\n    this.getCategoryList();\n    this.getOrderList();\n  },\n  computed: {\n    noMore: function noMore() {\n      return this.orderList.length >= this.total;\n    },\n    disabled: function disabled() {\n      return this.loading || this.noMore;\n    }\n  },\n  methods: {\n    getCategoryList: function getCategoryList() {\n      var _this = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var res;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return getCategoryApi();\n            case 2:\n              res = _context.sent;\n              _this.filterList[1].options = res.result;\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }))();\n    },\n    getOrderList: function getOrderList(load) {\n      var _this2 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var res;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _this2.loading = true;\n              _context2.next = 3;\n              return getUserOrderApi(_objectSpread({\n                pageNo: _this2.pageNo,\n                pageSize: _this2.pageSize\n              }, _this2.filterData));\n            case 3:\n              res = _context2.sent;\n              if (res) {\n                if (load) {\n                  _this2.orderList = [].concat(_toConsumableArray(_this2.orderList), _toConsumableArray(res.result));\n                } else {\n                  _this2.orderList = res.result;\n                }\n              }\n\n              // this.total = res.result.total;\n              _this2.loading = false;\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }))();\n    },\n    handleSearch: function handleSearch() {\n      this.pageNo = 1;\n      this.orderList = [];\n      this.getOrderList();\n    },\n    getByIdFindName: function getByIdFindName(id, list) {\n      var item = list.find(function (item) {\n        return item.id == id;\n      });\n      return item && item.name ? item.name : \"\";\n    },\n    load: function load() {\n      this.pageNo = this.pageNo + 1;\n      this.getOrderList(true);\n    },\n    handleDetail: function handleDetail(item) {\n      // this.$router.push({path: \"/userCenter/orderDetail\", query: {orderNum: item.orderNum}})\n      this.$router.push({\n        path: \"/userCenter/myCourse\",\n        query: {\n          orderNum: item.orderNum\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["getCategoryApi","getUserOrderApi","singleFilter","getDate","components","data","formateDate","filterData","hasFree","categoryId","hasLive","filterList","label","key","value","options","id","name","hasFreeList","hasLiveList","orderList","pageNo","pageSize","total","loading","created","getCategoryList","getOrderList","computed","noMore","length","disabled","methods","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","sent","result","stop","load","_this2","_callee2","_callee2$","_context2","_objectSpread","concat","_toConsumableArray","handleSearch","getByIdFindName","list","item","find","handleDetail","$router","push","path","query","orderNum"],"sources":["src/views/userCenter/myOrder.vue"],"sourcesContent":["<template>\n  <div class=\"myOrder\">\n    <div class=\"filter-box\">\n      <singleFilter\n        v-model=\"filterData\"\n        ref=\"filter\"\n        size=\"small\"\n        :filter-list=\"filterList\"\n        @search=\"handleSearch\"\n      ></singleFilter>\n    </div>\n    <div\n      class=\"content-box\"\n      v-infinite-scroll=\"load\"\n      infinite-scroll-disabled=\"disabled\"\n    >\n      <div v-for=\"(item, index) in orderList\" :key=\"index\" class=\"content-item\">\n        <div class=\"header-top\">\n          <div class=\"order_num\">\n            <span v-if=\"item.createTime\">{{\n              formateDate(item.createTime)\n            }}</span\n            ><span style=\"padding-right: 0px\">订单号：{{ item.orderNum }}</span>\n            <!-- <span :class=\"{ opend: item.openStatus === 1 }\"\n              >({{ item.openStatus === 1 ? \"已开通\" : \"未开通\" }})</span\n            > -->\n          </div>\n          <div class=\"status\">\n            <!-- {{ item.status === 0 ? \"未支付\" : \"已支付\" }} -->\n            <span :class=\"{ opend: item.openStatus === 1 }\"\n              >{{ item.openStatus === 1 ? \"已开通\" : \"未开通\" }}</span\n            >\n          </div>\n        </div>\n        <div class=\"course_order_info\">\n          <div class=\"course-info-left\">\n            <div\n              class=\"course_item\"\n              v-for=\"(course, index) in item.courseVoList\"\n              :key=\"index\"\n            >\n              <el-image\n                :src=\"course.image\"\n                style=\"width: 100px\"\n                fit=\"fill\"\n                :lazy=\"true\"\n              ></el-image>\n              <div class=\"course-name\">{{ course.name }}</div>\n            </div>\n          </div>\n          <div class=\"order-info-right\">\n            <div class=\"order_price_num\">\n              <div class=\"price\">\n                <span class=\"price_icon\">￥</span>{{ item.price }}\n              </div>\n              <div class=\"num\">共{{ item.count }}个课程</div>\n            </div>\n            <el-button @click=\"handleDetail(item)\" style=\"margin-top: 10px;\"\n                       type=\"primary\" size=\"mini\">查看课程</el-button>\n          </div>\n        </div>\n      </div>\n      <div class=\"bottom-info\" v-if=\"loading\">加载中...</div>\n      <div class=\"bottom-info\" v-if=\"noMore\">没有更多了</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getCategoryApi } from \"@/common/api/schoollDetails\";\nimport { getUserOrderApi } from \"@/common/api/user\";\nimport singleFilter from \"@/components/singleFilter.vue\";\nimport { getDate } from \"@/utils/tools\";\nexport default {\n  components: {\n    singleFilter,\n  },\n  data() {\n    return {\n      formateDate: getDate,\n      filterData: {\n        hasFree: \"\",\n        categoryId: \"\",\n        hasLive: \"\",\n      },\n      filterList: [\n        {\n          label: \"课程分类\",\n          key: \"hasFree\",\n          value: \"\",\n          options: [\n            {\n              id: 0,\n              name: \"公开课\",\n            },\n            {\n              id: 1,\n              name: \"会员课\",\n            },\n          ],\n        },\n        {\n          label: \"课程类型\",\n          key: \"categoryId\",\n          value: \"\",\n          options: [],\n        },\n        {\n          label: \"观看类型\",\n          value: \"\",\n          key: \"hasLive\",\n          options: [\n            {\n              id: 0,\n              name: \"直播\",\n            },\n            {\n              id: 1,\n              name: \"录播\",\n            },\n          ],\n        },\n      ],\n      hasFreeList: [\n        {\n          id: 0,\n          name: \"免费\",\n        },\n        {\n          id: 1,\n          name: \"收费\",\n        },\n      ],\n      hasLiveList: [\n        {\n          id: 0,\n          name: \"直播\",\n        },\n        {\n          id: 1,\n          name: \"录播\",\n        },\n      ],\n      orderList: [],\n      pageNo: 1,\n      pageSize: 3,\n      total: 0,\n      loading: false,\n    };\n  },\n  created() {\n    this.getCategoryList();\n    this.getOrderList();\n  },\n  computed: {\n    noMore() {\n      return this.orderList.length >= this.total;\n    },\n    disabled() {\n      return this.loading || this.noMore;\n    },\n  },\n  methods: {\n    async getCategoryList() {\n      const res = await getCategoryApi();\n      this.filterList[1].options = res.result;\n    },\n    async getOrderList(load) {\n      this.loading = true;\n      const res = await getUserOrderApi({\n        pageNo: this.pageNo,\n        pageSize: this.pageSize,\n        ...this.filterData,\n      });\n      if (res) {\n        if (load) {\n          this.orderList = [...this.orderList, ...res.result];\n        } else {\n          this.orderList = res.result;\n        }\n      }\n\n      // this.total = res.result.total;\n      this.loading = false;\n    },\n    handleSearch() {\n      this.pageNo = 1;\n      this.orderList = [];\n      this.getOrderList();\n    },\n\n    getByIdFindName(id, list) {\n      const item = list.find((item) => item.id == id);\n      return item && item.name ? item.name : \"\";\n    },\n\n    load() {\n      this.pageNo = this.pageNo + 1;\n      this.getOrderList(true);\n    },\n\n    handleDetail(item) {\n      // this.$router.push({path: \"/userCenter/orderDetail\", query: {orderNum: item.orderNum}})\n      this.$router.push({path: \"/userCenter/myCourse\", query: {orderNum: item.orderNum}})\n    }\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n.tag-living {\n  background-color: rgba(255, 120, 0, 0.8);\n  position: absolute;\n  z-index: 10;\n  top: 4px;\n  left: 4px;\n  display: block;\n  width: 61px;\n  height: 19px;\n  line-height: 19px;\n  font-size: 12px;\n  text-align: center;\n  color: #fff;\n  border-radius: 2px;\n  .tag-icon {\n    border-radius: 50%;\n    background-image: url(https://a.msstatic.com/huya/main3/components/SubscribeList/Card/img/icon_live_eb974.png);\n    animation: matchLiving 0.6s steps(6) infinite;\n    margin-left: -4px;\n    margin-right: 3px;\n    padding: 0 8px;\n  }\n}\n@keyframes matchLiving {\n  0% {\n    background-position: 0 0;\n  }\n  100% {\n    background-position: -109px 0;\n  }\n}\n.myOrder {\n  width: 100%;\n  // padding: 20px;\n  padding-top: 0px;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n  .vip-mark {\n    box-sizing: border-box;\n    display: flex;\n    z-index: 100;\n    justify-content: center;\n    align-items: center;\n    right: 4px;\n    top: 4px;\n    position: absolute;\n    width: 30px;\n    height: 16px;\n    color: #8e5323;\n    font-size: 10px;\n    font-style: normal;\n    background: linear-gradient(170deg, #fbdec0, #f2b981);\n    border-radius: 5px;\n  }\n}\n\n.content-box {\n  overflow: auto;\n  width: 100%;\n  margin: auto;\n  flex: 1;\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  padding: 0px 20px;\n\n  .content-item {\n    display: flex;\n    flex-direction: column;\n    margin-bottom: 20px;\n    background: #fff;\n    box-sizing: border-box;\n    justify-content: space-between;\n    cursor: pointer;\n    width: 100%;\n\n    padding: 10px 20px;\n    // box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n    border-radius: 10px;\n    border: 1px solid #eaeaea;\n    &:hover {\n      box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n    }\n\n    .opend {\n          color: rgb(71, 184, 71);\n        }\n    .header-top {\n      display: flex;\n      justify-content: space-between;\n      width: 100%;\n      font-size: 12px;\n      color: #666666;\n      .order_num {\n        span {\n          padding-right: 15px;\n        }\n        \n      }\n    }\n\n    .course_order_info {\n      display: flex;\n      justify-content: space-between;\n      align-items: flex-end;\n      padding-top: 15px;\n      .course-info-left {\n        flex: 1;\n        display: flex;\n        font-size: 12px;\n        color: #333333;\n        overflow: auto;\n\n        .course_item {\n          padding-right: 20px;\n        }\n        .el-image {\n          border-radius: 3px;\n        }\n      }\n      .order-info-right {\n        text-align: right;\n        .order_price_num {\n          font-size: 18px;\n\n          .price {\n            padding-bottom: 5px;\n            // color: red;\n            .price_icon {\n              font-size: 14px;\n            }\n          }\n          .num {\n            font-size: 12px;\n            color: #666666;\n          }\n        }\n      }\n    }\n  }\n\n  .bottom-info {\n    width: 100%;\n    text-align: center;\n    margin: 20px 0px;\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}