{"ast":null,"code":"import _regeneratorRuntime from \"/Users/fjw/Desktop/yskt/yskt-official-website/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _objectSpread from \"/Users/fjw/Desktop/yskt/yskt-official-website/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"/Users/fjw/Desktop/yskt/yskt-official-website/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/web.timers.js\";\nimport { registerApi } from \"@/common/api/user\";\nimport { getArticleDetailApi } from '@/common/api/aricle';\nexport default {\n  data: function data() {\n    return {\n      dialogVisible: false,\n      timer: \"\",\n      nameVisible: false,\n      btnDisabled: false,\n      info: {},\n      addData: {\n        name: \"\"\n      },\n      btnTitle: \"我已阅读并同意本协议\"\n    };\n  },\n  methods: {\n    open: function open() {\n      var _this = this;\n      this.dialogVisible = true;\n      this.btnDisabled = true;\n      this.getInfo();\n      var time = 9;\n      this.timer = setInterval(function () {\n        // 判断剩余秒数\n        if (time == 0) {\n          // 清除定时器和复原按钮\n          _this.btnTitle = \"\\u6211\\u5DF2\\u9605\\u8BFB\\u5E76\\u540C\\u610F\\u672C\\u534F\\u8BAE\";\n          clearInterval(_this.timer);\n          _this.btnDisabled = false;\n        } else {\n          _this.btnTitle = \"\\u6211\\u5DF2\\u9605\\u8BFB\\u5E76\\u540C\\u610F\\u672C\\u534F\\u8BAE\\uFF08 \".concat(time, \"s \\uFF09\");\n          time--;\n        }\n      }, 1000);\n    },\n    close: function close() {\n      this.dialogVisible = false;\n      clearInterval(this.timer);\n      this.btnTitle = \"\\u6211\\u5DF2\\u9605\\u8BFB\\u5E76\\u540C\\u610F\\u672C\\u534F\\u8BAE\";\n    },\n    handleRegisterSubmit: function handleRegisterSubmit() {\n      var _this2 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var res;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return registerApi(_objectSpread({}, _this2.addData));\n            case 2:\n              res = _context.sent;\n              if (res) {\n                _this2.$message.success(\"注册成功\");\n                _this2.closeName();\n                _this2.dialogVisible = false;\n              }\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }))();\n    },\n    getInfo: function getInfo() {\n      var _this3 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var res;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return getArticleDetailApi({\n                id: 6\n              });\n            case 2:\n              res = _context2.sent;\n              _this3.info = res.result;\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }))();\n    },\n    closeName: function closeName() {\n      this.addData = {\n        name: \"\"\n      };\n      this.nameVisible = false;\n    }\n  }\n};","map":{"version":3,"names":["registerApi","getArticleDetailApi","data","dialogVisible","timer","nameVisible","btnDisabled","info","addData","name","btnTitle","methods","open","_this","getInfo","time","setInterval","clearInterval","concat","close","handleRegisterSubmit","_this2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","_objectSpread","sent","$message","success","closeName","stop","_this3","_callee2","_callee2$","_context2","id","result"],"sources":["src/views/userCenter/agreementDialog.vue"],"sourcesContent":["<template>\n  <div>\n    <el-dialog\n      center\n      title=\"用户服务协议\"\n      :visible.sync=\"dialogVisible\"\n      :close-on-click-modal=\"false\"\n      @close=\"close\"\n      width=\"60%\"\n    >\n      <div>\n        <h2 style=\"text-align: center; margin-bottom: 10px\">学籍注册系统</h2>\n        <h4 style=\"text-align: center; margin-bottom: 10px\">用户服务协议</h4>\n        <div v-html=\"info.content\"></div>\n      </div>\n      <div\n        style=\"width: 100%; text-align: center\"\n        slot=\"footer\"\n        class=\"dialog-footer\"\n      >\n        <el-button\n          style=\"width: 80%\"\n          :disabled=\"btnDisabled\"\n          type=\"primary\"\n          @click=\"() => (nameVisible = true)\"\n          >{{ btnTitle }}</el-button\n        >\n      </div>\n    </el-dialog>\n    <el-dialog\n      title=\"真实姓名\"\n      :visible=\"nameVisible\"\n      v-model=\"addData\"\n      @close=\"closeName\"\n      width=\"30%\"\n    >\n      <span>\n        <el-input\n          v-model=\"addData.name\"\n          placeholder=\"请输入真实姓名\"\n          size=\"normal\"\n          clearable\n        ></el-input>\n      </span>\n      <template #footer>\n        <span>\n          <el-button type=\"primary\" @click=\"handleRegisterSubmit\"\n            >确定</el-button\n          >\n        </span>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { registerApi } from \"@/common/api/user\";\nimport { getArticleDetailApi } from '@/common/api/aricle';\nexport default {\n  data() {\n    return {\n      dialogVisible: false,\n      timer: \"\",\n      nameVisible: false,\n      btnDisabled: false,\n      info: {},\n      addData: {\n        name: \"\",\n      },\n      btnTitle: \"我已阅读并同意本协议\",\n    };\n  },\n\n  methods: {\n    open() {\n      this.dialogVisible = true;\n      this.btnDisabled = true;\n      this.getInfo()\n      let time = 9;\n      this.timer = setInterval(() => {\n        // 判断剩余秒数\n        if (time == 0) {\n          // 清除定时器和复原按钮\n          this.btnTitle = `我已阅读并同意本协议`;\n          clearInterval(this.timer);\n          this.btnDisabled = false;\n        } else {\n          this.btnTitle = `我已阅读并同意本协议（ ${time}s ）`;\n          time--;\n        }\n      }, 1000);\n    },\n    close() {\n      this.dialogVisible = false;\n      clearInterval(this.timer);\n      this.btnTitle = `我已阅读并同意本协议`;\n    },\n    async handleRegisterSubmit() {\n      const res = await registerApi({ ...this.addData });\n      if (res) {\n        this.$message.success(\"注册成功\");\n        this.closeName()\n        this.dialogVisible = false\n      }\n    },\n    async getInfo() {\n     const res =  await getArticleDetailApi({id: 6})\n     this.info = res.result\n    },\n    closeName() {\n        this.addData = {\n            name: \"\"\n        }\n        this.nameVisible  = false\n    }\n  },\n};\n</script>\n<style lang=\"less\" scoped>\np {\n  line-height: 30px;\n}\n</style>\n"],"mappings":";;;;AAwDA,SAAAA,WAAA;AACA,SAAAC,mBAAA;AACA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,aAAA;MACAC,KAAA;MACAC,WAAA;MACAC,WAAA;MACAC,IAAA;MACAC,OAAA;QACAC,IAAA;MACA;MACAC,QAAA;IACA;EACA;EAEAC,OAAA;IACAC,IAAA,WAAAA,KAAA;MAAA,IAAAC,KAAA;MACA,KAAAV,aAAA;MACA,KAAAG,WAAA;MACA,KAAAQ,OAAA;MACA,IAAAC,IAAA;MACA,KAAAX,KAAA,GAAAY,WAAA;QACA;QACA,IAAAD,IAAA;UACA;UACAF,KAAA,CAAAH,QAAA;UACAO,aAAA,CAAAJ,KAAA,CAAAT,KAAA;UACAS,KAAA,CAAAP,WAAA;QACA;UACAO,KAAA,CAAAH,QAAA,yEAAAQ,MAAA,CAAAH,IAAA;UACAA,IAAA;QACA;MACA;IACA;IACAI,KAAA,WAAAA,MAAA;MACA,KAAAhB,aAAA;MACAc,aAAA,MAAAb,KAAA;MACA,KAAAM,QAAA;IACA;IACAU,oBAAA,WAAAA,qBAAA;MAAA,IAAAC,MAAA;MAAA,OAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,GAAA;QAAA,OAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAAF,QAAA,CAAAE,IAAA;cAAA,OACA/B,WAAA,CAAAgC,aAAA,KAAAX,MAAA,CAAAb,OAAA;YAAA;cAAAkB,GAAA,GAAAG,QAAA,CAAAI,IAAA;cACA,IAAAP,GAAA;gBACAL,MAAA,CAAAa,QAAA,CAAAC,OAAA;gBACAd,MAAA,CAAAe,SAAA;gBACAf,MAAA,CAAAlB,aAAA;cACA;YAAA;YAAA;cAAA,OAAA0B,QAAA,CAAAQ,IAAA;UAAA;QAAA,GAAAZ,OAAA;MAAA;IACA;IACAX,OAAA,WAAAA,QAAA;MAAA,IAAAwB,MAAA;MAAA,OAAAhB,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,UAAAe,SAAA;QAAA,IAAAb,GAAA;QAAA,OAAAH,mBAAA,GAAAI,IAAA,UAAAa,UAAAC,SAAA;UAAA,kBAAAA,SAAA,CAAAX,IAAA,GAAAW,SAAA,CAAAV,IAAA;YAAA;cAAAU,SAAA,CAAAV,IAAA;cAAA,OACA9B,mBAAA;gBAAAyC,EAAA;cAAA;YAAA;cAAAhB,GAAA,GAAAe,SAAA,CAAAR,IAAA;cACAK,MAAA,CAAA/B,IAAA,GAAAmB,GAAA,CAAAiB,MAAA;YAAA;YAAA;cAAA,OAAAF,SAAA,CAAAJ,IAAA;UAAA;QAAA,GAAAE,QAAA;MAAA;IACA;IACAH,SAAA,WAAAA,UAAA;MACA,KAAA5B,OAAA;QACAC,IAAA;MACA;MACA,KAAAJ,WAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}