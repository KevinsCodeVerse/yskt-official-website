"use strict";(self["webpackChunktengfei"]=self["webpackChunktengfei"]||[]).push([[129],{20129:(e,t,n)=>{n.r(t),n.d(t,{default:()=>X});var i=function(){var e=this,t=e._self._c;return t("transition",{attrs:{name:"viewer-fade"}},[t("div",{ref:"el-image-viewer__wrapper",staticClass:"el-image-viewer__wrapper",style:{"z-index":e.viewerZIndex},attrs:{tabindex:"-1"}},[t("div",{staticClass:"el-image-viewer__mask",on:{click:function(t){return t.target!==t.currentTarget?null:e.handleMaskClick.apply(null,arguments)}}}),t("span",{staticClass:"el-image-viewer__btn el-image-viewer__close",on:{click:e.hide}},[t("i",{staticClass:"el-icon-close"})]),e.isSingle?e._e():[t("span",{staticClass:"el-image-viewer__btn el-image-viewer__prev",class:{"is-disabled":!e.infinite&&e.isFirst},on:{click:e.prev}},[t("i",{staticClass:"el-icon-arrow-left"})]),t("span",{staticClass:"el-image-viewer__btn el-image-viewer__next",class:{"is-disabled":!e.infinite&&e.isLast},on:{click:e.next}},[t("i",{staticClass:"el-icon-arrow-right"})])],t("div",{staticClass:"el-image-viewer__btn el-image-viewer__actions"},[t("div",{staticClass:"el-image-viewer__actions__inner"},[t("i",{staticClass:"el-icon-zoom-out",on:{click:function(t){return e.handleActions("zoomOut")}}}),t("i",{staticClass:"el-icon-zoom-in",on:{click:function(t){return e.handleActions("zoomIn")}}}),t("i",{staticClass:"el-image-viewer__actions__divider"}),t("i",{class:e.mode.icon,on:{click:e.toggleMode}}),t("i",{staticClass:"el-image-viewer__actions__divider"}),t("i",{staticClass:"el-icon-refresh-left",on:{click:function(t){return e.handleActions("anticlocelise")}}}),t("i",{staticClass:"el-icon-refresh-right",on:{click:function(t){return e.handleActions("clocelise")}}})])]),t("div",{staticClass:"el-image-viewer__canvas"},e._l(e.urlList,(function(n,i){return i===e.index?t("img",{key:n,ref:"img",refInFor:!0,staticClass:"el-image-viewer__img",style:e.imgStyle,attrs:{src:e.currentImg},on:{load:e.handleImgLoad,error:e.handleImgError,mousedown:e.handleMouseDown}}):e._e()})),0)],2)])},a=[],o=n(7180),r=(n(28706),n(25276),n(2892),n(9868),n(79432),n(16034),n(78459),n(45929)),s=(n(16280),n(76918),n(2008),n(74423),n(26099),n(27495),n(21699),n(71761),n(25440),n(22856)),l=s["default"].prototype.$isServer,c=/([\:\-\_]+(.))/g,d=/^moz([A-Z])/,u=l?0:Number(document.documentMode),f=function(e){return(e||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")},h=function(e){return e.replace(c,(function(e,t,n,i){return i?n.toUpperCase():n})).replace(d,"Moz$1")},m=function(){return!l&&document.addEventListener?function(e,t,n){e&&t&&n&&e.addEventListener(t,n,!1)}:function(e,t,n){e&&t&&n&&e.attachEvent("on"+t,n)}}(),v=function(){return!l&&document.removeEventListener?function(e,t,n){e&&t&&e.removeEventListener(t,n,!1)}:function(e,t,n){e&&t&&e.detachEvent("on"+t,n)}}();function p(e,t){if(!e||!t)return!1;if(-1!==t.indexOf(" "))throw new Error("className should not contain space.");return e.classList?e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1}function g(e,t){if(e){for(var n=e.className,i=(t||"").split(" "),a=0,o=i.length;a<o;a++){var r=i[a];r&&(e.classList?e.classList.add(r):p(e,r)||(n+=" "+r))}e.classList||e.setAttribute("class",n)}}function y(e,t){if(e&&t){for(var n=t.split(" "),i=" "+e.className+" ",a=0,o=n.length;a<o;a++){var r=n[a];r&&(e.classList?e.classList.remove(r):p(e,r)&&(i=i.replace(" "+r+" "," ")))}e.classList||e.setAttribute("class",f(i))}}var w=u<9?function(e,t){if(!l){if(!e||!t)return null;t=h(t),"float"===t&&(t="styleFloat");try{switch(t){case"opacity":try{return e.filters.item("alpha").opacity/100}catch(n){return 1}default:return e.style[t]||e.currentStyle?e.currentStyle[t]:null}}catch(n){return e.style[t]}}}:function(e,t){if(!l){if(!e||!t)return null;t=h(t),"float"===t&&(t="cssFloat");try{var n=document.defaultView.getComputedStyle(e,"");return e.style[t]||n?n[t]:null}catch(i){return e.style[t]}}};n(51629),n(64346),n(34782),n(60739),n(23288),n(33110),n(90906),n(38781),n(54743),n(11745),n(38309),n(16573),n(78100),n(77936),n(46594),n(48140),n(81630),n(72170),n(75044),n(69539),n(31694),n(89955),n(21903),n(91134),n(33206),n(44496),n(66651),n(12887),n(19369),n(66812),n(8995),n(31575),n(36072),n(88747),n(28845),n(29423),n(57301),n(373),n(86614),n(41405),n(37467),n(44732),n(33684),n(79577);"object"===("undefined"===typeof Int8Array?"undefined":(0,r.A)(Int8Array))||!s["default"].prototype.$isServer&&document.childNodes;Object.prototype.hasOwnProperty;var _=function(){return!s["default"].prototype.$isServer&&!!window.navigator.userAgent.match(/firefox/i)};function k(e){var t=!1;return function(){for(var n=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];t||(t=!0,window.requestAnimationFrame((function(i){e.apply(n,a),t=!1})))}}n(58940),n(76031);function C(e){for(var t=1,n=arguments.length;t<n;t++){var i=arguments[t]||{};for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];void 0!==o&&(e[a]=o)}}return e}n(44114),n(54554),n(84185),n(90744),n(42762),n(23500);var b,x=!1,I=!1,S=function(){if(!s["default"].prototype.$isServer){var e=z.modalDom;return e?x=!0:(x=!1,e=document.createElement("div"),z.modalDom=e,e.addEventListener("touchmove",(function(e){e.preventDefault(),e.stopPropagation()})),e.addEventListener("click",(function(){z.doOnModalClick&&z.doOnModalClick()}))),e}},L={},z={modalFade:!0,getInstance:function(e){return L[e]},register:function(e,t){e&&t&&(L[e]=t)},deregister:function(e){e&&(L[e]=null,delete L[e])},nextZIndex:function(){return z.zIndex++},modalStack:[],doOnModalClick:function(){var e=z.modalStack[z.modalStack.length-1];if(e){var t=z.getInstance(e.id);t&&t.closeOnClickModal&&t.close()}},openModal:function(e,t,n,i,a){if(!s["default"].prototype.$isServer&&e&&void 0!==t){this.modalFade=a;for(var o=this.modalStack,r=0,l=o.length;r<l;r++){var c=o[r];if(c.id===e)return}var d=S();if(g(d,"v-modal"),this.modalFade&&!x&&g(d,"v-modal-enter"),i){var u=i.trim().split(/\s+/);u.forEach((function(e){return g(d,e)}))}setTimeout((function(){y(d,"v-modal-enter")}),200),n&&n.parentNode&&11!==n.parentNode.nodeType?n.parentNode.appendChild(d):document.body.appendChild(d),t&&(d.style.zIndex=t),d.tabIndex=0,d.style.display="",this.modalStack.push({id:e,zIndex:t,modalClass:i})}},closeModal:function(e){var t=this.modalStack,n=S();if(t.length>0){var i=t[t.length-1];if(i.id===e){if(i.modalClass){var a=i.modalClass.trim().split(/\s+/);a.forEach((function(e){return y(n,e)}))}t.pop(),t.length>0&&(n.style.zIndex=t[t.length-1].zIndex)}else for(var o=t.length-1;o>=0;o--)if(t[o].id===e){t.splice(o,1);break}}0===t.length&&(this.modalFade&&g(n,"v-modal-leave"),setTimeout((function(){0===t.length&&(n.parentNode&&n.parentNode.removeChild(n),n.style.display="none",z.modalDom=void 0),y(n,"v-modal-leave")}),200))}};Object.defineProperty(z,"zIndex",{configurable:!0,get:function(){return I||(b=b||(s["default"].prototype.$ELEMENT||{}).zIndex||2e3,I=!0),b},set:function(e){b=e}});var A=function(){if(!s["default"].prototype.$isServer&&z.modalStack.length>0){var e=z.modalStack[z.modalStack.length-1];if(!e)return;var t=z.getInstance(e.id);return t}};s["default"].prototype.$isServer||window.addEventListener("keydown",(function(e){if(27===e.keyCode){var t=A();t&&t.closeOnPressEscape&&(t.handleClose?t.handleClose():t.handleAction?t.handleAction("cancel"):t.close())}}));const N=z;var E;function F(){if(s["default"].prototype.$isServer)return 0;if(void 0!==E)return E;var e=document.createElement("div");e.className="el-scrollbar__wrap",e.style.visibility="hidden",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",e.appendChild(n);var i=n.offsetWidth;return e.parentNode.removeChild(e),E=t-i,E}var O,T=1;Boolean,Boolean,Boolean,Boolean,Boolean,Boolean,Boolean;var $={CONTAIN:{name:"contain",icon:"el-icon-full-screen"},ORIGINAL:{name:"original",icon:"el-icon-c-scale-to-original"}},M=_()?"DOMMouseScroll":"mousewheel";const D={name:"elImageViewer",props:{urlList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3},onSwitch:{type:Function,default:function(){}},onClose:{type:Function,default:function(){}},initialIndex:{type:Number,default:0},appendToBody:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0}},data:function(){return{index:this.initialIndex,isShow:!1,infinite:!0,loading:!1,mode:$.CONTAIN,transform:{scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}},computed:{isSingle:function(){return this.urlList.length<=1},isFirst:function(){return 0===this.index},isLast:function(){return this.index===this.urlList.length-1},currentImg:function(){return this.urlList[this.index]},imgStyle:function(){var e=this.transform,t=e.scale,n=e.deg,i=e.offsetX,a=e.offsetY,o=e.enableTransition,r={transform:"scale(".concat(t,") rotate(").concat(n,"deg)"),transition:o?"transform .3s":"","margin-left":"".concat(i,"px"),"margin-top":"".concat(a,"px")};return this.mode===$.CONTAIN&&(r.maxWidth=r.maxHeight="100%"),r},viewerZIndex:function(){var e=N.nextZIndex();return this.zIndex>e?this.zIndex:e}},watch:{index:{handler:function(e){this.reset(),this.onSwitch(e)}},currentImg:function(e){var t=this;this.$nextTick((function(e){var n=t.$refs.img[0];n.complete||(t.loading=!0)}))}},methods:{hide:function(){this.deviceSupportUninstall(),this.onClose()},deviceSupportInstall:function(){var e=this;this._keyDownHandler=function(t){t.stopPropagation();var n=t.keyCode;switch(n){case 27:e.hide();break;case 32:e.toggleMode();break;case 37:e.prev();break;case 38:e.handleActions("zoomIn");break;case 39:e.next();break;case 40:e.handleActions("zoomOut");break}},this._mouseWheelHandler=k((function(t){var n=t.wheelDelta?t.wheelDelta:-t.detail;n>0?e.handleActions("zoomIn",{zoomRate:.015,enableTransition:!1}):e.handleActions("zoomOut",{zoomRate:.015,enableTransition:!1})})),m(document,"keydown",this._keyDownHandler),m(document,M,this._mouseWheelHandler)},deviceSupportUninstall:function(){v(document,"keydown",this._keyDownHandler),v(document,M,this._mouseWheelHandler),this._keyDownHandler=null,this._mouseWheelHandler=null},handleImgLoad:function(e){this.loading=!1},handleImgError:function(e){this.loading=!1,e.target.alt="加载失败"},handleMouseDown:function(e){var t=this;if(!this.loading&&0===e.button){var n=this.transform,i=n.offsetX,a=n.offsetY,o=e.pageX,r=e.pageY;this._dragHandler=k((function(e){t.transform.offsetX=i+e.pageX-o,t.transform.offsetY=a+e.pageY-r})),m(document,"mousemove",this._dragHandler),m(document,"mouseup",(function(e){v(document,"mousemove",t._dragHandler)})),e.preventDefault()}},handleMaskClick:function(){this.maskClosable&&this.hide()},reset:function(){this.transform={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}},toggleMode:function(){if(!this.loading){var e=Object.keys($),t=Object.values($),n=t.indexOf(this.mode),i=(n+1)%e.length;this.mode=$[e[i]],this.reset()}},prev:function(){if(!this.isFirst||this.infinite){var e=this.urlList.length;this.index=(this.index-1+e)%e}},next:function(){if(!this.isLast||this.infinite){var e=this.urlList.length;this.index=(this.index+1)%e}},handleActions:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.loading){var n=(0,o.A)({zoomRate:.2,rotateDeg:90,enableTransition:!0},t),i=n.zoomRate,a=n.rotateDeg,r=n.enableTransition,s=this.transform;switch(e){case"zoomOut":s.scale>.2&&(s.scale=parseFloat((s.scale-i).toFixed(3)));break;case"zoomIn":s.scale=parseFloat((s.scale+i).toFixed(3));break;case"clocelise":s.deg+=a;break;case"anticlocelise":s.deg-=a;break}s.enableTransition=r}}},mounted:function(){this.deviceSupportInstall(),this.appendToBody&&document.body.appendChild(this.$el),this.$refs["el-image-viewer__wrapper"].focus()},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},B=D;var H=n(81656),W=(0,H.A)(B,i,a,!1,null,null,null);const X=W.exports}}]);
//# sourceMappingURL=129.3fa9e4d6.js.map